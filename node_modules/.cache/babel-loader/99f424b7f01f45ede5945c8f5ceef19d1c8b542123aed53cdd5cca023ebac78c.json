{"ast":null,"code":"var _jsxFileName = \"C:\\\\coding\\\\react-teamproject-eattogether\\\\src\\\\components\\\\Room.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport '../styles/Room.css';\nimport axios from 'axios';\nimport { JSON_SERVER } from '../JsonConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Room({\n  id,\n  roomname,\n  placeid,\n  date,\n  maxpeople\n}) {\n  _s();\n  const [place, setPlace] = useState([]);\n  const [placeName, setPlaceName] = useState('');\n  const [joiner, setJoiner] = useState([]);\n  const [joinCompleted, setJoinCompleted] = useState(false);\n  const [fullRoom, setFullRoom] = useState(false);\n  const [joinerCount, setJoinerCount] = useState(0);\n  const localUser = JSON.parse(localStorage.getItem('user'));\n\n  //방 지역 데이터\n  async function fetchPlaceData() {\n    const array = await axios.get(JSON_SERVER + `/place?id=${placeid}`);\n    setPlace(array.data);\n    setPlaceName(array.data[0].Placename);\n    fetchJoinerData();\n  }\n\n  //방에 참여한 인원 데이터\n  async function fetchJoinerData() {\n    const fetchData = await axios.get(JSON_SERVER + `/joiner?roomid=${id}`);\n    setJoiner(fetchData.data);\n    setJoinerCount(fetchData.data.length);\n  }\n  function postJoinRoom() {\n    const postData = {\n      userid: localUser.id,\n      roomid: id\n    };\n    axios.post(JSON_SERVER + `/joiner`, postData);\n  }\n\n  //joiner에 본인이 포함되어 있는지\n  function checkCanIJoin() {\n    setJoinCompleted(!(joiner.find(e => e.userid === localUser.id) === undefined));\n    checkFullRoom();\n  }\n  function checkFullRoom() {\n    setFullRoom(joinerCount >= maxpeople ? true : false);\n  }\n  useEffect(() => {\n    checkCanIJoin();\n  }, [joiner]);\n  function findAddress() {\n    if (place.length > 0) {\n      return place[0].Address;\n    } else {\n      return '';\n    }\n  }\n  function joinRoom() {\n    const a = localStorage.getItem('user');\n    if (a) {\n      //조인 완료\n      console.log('asdf');\n      postJoinRoom();\n      setJoinerCount(joinerCount + 1);\n      checkFullRoom();\n      setJoinCompleted(true);\n    } else {\n      //조인 실패\n      console.log('로그인으로');\n    }\n  }\n  useEffect(() => {\n    fetchPlaceData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"room-item-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-info-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-name\",\n        children: roomname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"place-id\",\n        children: placeName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"place-id\",\n        children: findAddress()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-date\",\n        children: date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"join-btn-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"square-button-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-people\",\n          children: [joinerCount, \" / \", maxpeople]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `square-button ${joinCompleted || fullRoom ? 'active' : ''}`,\n        onClick: joinRoom,\n        disabled: joinCompleted || fullRoom,\n        children: fullRoom ? '정원 초과' : joinCompleted ? '참여 완료' : '같이 먹기'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n_s(Room, \"jStyh3MTFwFIUxrp1T1sMxnVrno=\");\n_c = Room;\nexport default Room;\nvar _c;\n$RefreshReg$(_c, \"Room\");","map":{"version":3,"names":["React","useEffect","useState","axios","JSON_SERVER","jsxDEV","_jsxDEV","Room","id","roomname","placeid","date","maxpeople","_s","place","setPlace","placeName","setPlaceName","joiner","setJoiner","joinCompleted","setJoinCompleted","fullRoom","setFullRoom","joinerCount","setJoinerCount","localUser","JSON","parse","localStorage","getItem","fetchPlaceData","array","get","data","Placename","fetchJoinerData","fetchData","length","postJoinRoom","postData","userid","roomid","post","checkCanIJoin","find","e","undefined","checkFullRoom","findAddress","Address","joinRoom","a","console","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/coding/react-teamproject-eattogether/src/components/Room.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport '../styles/Room.css';\r\nimport axios from 'axios';\r\nimport { JSON_SERVER } from '../JsonConfig';\r\n\r\nfunction Room({ id, roomname, placeid, date, maxpeople }) {\r\n  const [place, setPlace] = useState([]);\r\n  const [placeName, setPlaceName] = useState('');\r\n  const [joiner, setJoiner] = useState([]);\r\n  const [joinCompleted, setJoinCompleted] = useState(false);\r\n  const [fullRoom, setFullRoom] = useState(false);\r\n  const [joinerCount, setJoinerCount] = useState(0);\r\n  const localUser = JSON.parse(localStorage.getItem('user'));\r\n\r\n  //방 지역 데이터\r\n  async function fetchPlaceData() {\r\n    const array = await axios.get(JSON_SERVER + `/place?id=${placeid}`);\r\n    setPlace(array.data);\r\n    setPlaceName(array.data[0].Placename);\r\n    fetchJoinerData();\r\n  }\r\n\r\n  //방에 참여한 인원 데이터\r\n  async function fetchJoinerData() {\r\n    const fetchData = await axios.get(JSON_SERVER + `/joiner?roomid=${id}`);\r\n    setJoiner(fetchData.data);\r\n    setJoinerCount(fetchData.data.length);\r\n  }\r\n  function postJoinRoom() {\r\n    const postData = {\r\n      userid: localUser.id,\r\n      roomid: id,\r\n    };\r\n    axios.post(JSON_SERVER + `/joiner`, postData);\r\n  }\r\n\r\n  //joiner에 본인이 포함되어 있는지\r\n  function checkCanIJoin() {\r\n    setJoinCompleted(\r\n      !(joiner.find((e) => e.userid === localUser.id) === undefined)\r\n    );\r\n    checkFullRoom();\r\n  }\r\n  function checkFullRoom() {\r\n    setFullRoom(joinerCount >= maxpeople ? true : false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkCanIJoin();\r\n  }, [joiner]);\r\n\r\n  function findAddress() {\r\n    if (place.length > 0) {\r\n      return place[0].Address;\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n  function joinRoom() {\r\n    const a = localStorage.getItem('user');\r\n    if (a) {\r\n      //조인 완료\r\n      console.log('asdf');\r\n      postJoinRoom();\r\n      setJoinerCount(joinerCount + 1);\r\n      checkFullRoom();\r\n      setJoinCompleted(true);\r\n    } else {\r\n      //조인 실패\r\n      console.log('로그인으로');\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    fetchPlaceData();\r\n  }, []);\r\n  return (\r\n    <div className=\"room-item-container\">\r\n      <div className=\"room-info-container\">\r\n        <div className=\"room-name\">{roomname}</div>\r\n        <div className=\"place-id\">{placeName}</div>\r\n        <div className=\"place-id\">{findAddress()}</div>\r\n        <div className=\"room-date\">{date}</div>\r\n      </div>\r\n      <div className=\"join-btn-container\">\r\n        <div className=\"square-button-container\">\r\n          <div className=\"max-people\">\r\n            {joinerCount} / {maxpeople}\r\n          </div>\r\n        </div>\r\n        <button\r\n          className={`square-button ${\r\n            joinCompleted || fullRoom ? 'active' : ''\r\n          }`}\r\n          onClick={joinRoom}\r\n          disabled={joinCompleted || fullRoom}\r\n        >\r\n          {fullRoom ? '정원 초과' : joinCompleted ? '참여 완료' : '같이 먹기'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Room;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}