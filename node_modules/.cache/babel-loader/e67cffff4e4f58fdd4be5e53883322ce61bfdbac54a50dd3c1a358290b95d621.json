{"ast":null,"code":"var _jsxFileName = \"C:\\\\coding\\\\react-teamproject-eattogether\\\\src\\\\components\\\\RVInfoItem.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport '../styles/RVInfoItem.css';\nimport axios from 'axios';\nimport { JSON_SERVER } from '../JsonConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RVInfoItem({\n  id,\n  roomname,\n  maxpeople,\n  placeid,\n  date,\n  deleteMyRoom\n}) {\n  _s();\n  const [joinUserId, setJoinUserId] = useState([]);\n  const [joinUser, setJoinUser] = useState([]);\n  const [place, setPlace] = useState({});\n  const localUser = JSON.parse(localStorage.getItem('user'));\n  async function fetchPlaceData() {\n    const data = await axios.get(JSON_SERVER + `/place?id=${placeid}`);\n    setPlace(data.data[0]);\n  }\n  async function fetchJoinerData() {\n    const data = await axios.get(JSON_SERVER + `/joiner?roomid=${id}`);\n    setJoinUserId(data.data);\n  }\n  async function fetchJoinerNickname() {\n    let str = '';\n    joinUserId.forEach(e => {\n      str += `id=${e.userid}&`;\n    });\n    const data = await axios.get(JSON_SERVER + `/users?${str}`);\n    setJoinUser(data.data);\n  }\n  async function deleteJoinerData(roomId) {\n    console.log(roomId + '이랑 ' + localUser.id);\n    try {\n      const joinerData = await axios.get(JSON_SERVER + `/joiner?roomid=${roomId}&userid=${localUser.id}`);\n      if (joinerData.data.length === 0) {\n        console.log('데이터를 찾을 수 없습니다.');\n        return;\n      }\n      const joinerIdToDelete = joinerData.data[0].id;\n      await axios.delete(JSON_SERVER + `/joiner/${joinerIdToDelete}`);\n      console.log('데이터가 성공적으로 삭제되었습니다.');\n    } catch (error) {\n      console.error('데이터 삭제 중 오류가 발생했습니다.', error);\n    }\n  }\n  function deleteRoom() {\n    axios.delete(JSON_SERVER + `/room/${id}`);\n  }\n  useEffect(() => {\n    fetchJoinerNickname();\n  }, [joinUserId]);\n  useEffect(() => {\n    fetchPlaceData();\n    fetchJoinerData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"room-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: roomname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [joinUserId.length, \" / \", maxpeople]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-address\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [place.Placename, \"\\uC8FC\\uC18C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [place.Address, \"\\uC8FC\\uC18C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-joiner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"room-joiner-info\",\n          children: \"\\uCC38\\uC5EC\\uC790\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), joinUser.map((e, i) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: e.nickname\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-time\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"room-time-info\",\n          children: \"\\uC2DC\\uAC04\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"room-exit-btn\",\n      onClick: () => {\n        deleteJoinerData(id);\n        deleteMyRoom(id);\n        if (joinUserId.length === 1) {\n          deleteRoom();\n        }\n      },\n      children: \"\\uBC29 \\uB098\\uAC00\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(RVInfoItem, \"ft1buheg8t877Dazx9eqlpjREcY=\");\n_c = RVInfoItem;\nexport default RVInfoItem;\nvar _c;\n$RefreshReg$(_c, \"RVInfoItem\");","map":{"version":3,"names":["React","useEffect","useState","axios","JSON_SERVER","jsxDEV","_jsxDEV","RVInfoItem","id","roomname","maxpeople","placeid","date","deleteMyRoom","_s","joinUserId","setJoinUserId","joinUser","setJoinUser","place","setPlace","localUser","JSON","parse","localStorage","getItem","fetchPlaceData","data","get","fetchJoinerData","fetchJoinerNickname","str","forEach","e","userid","deleteJoinerData","roomId","console","log","joinerData","length","joinerIdToDelete","delete","error","deleteRoom","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Placename","Address","map","i","nickname","onClick","_c","$RefreshReg$"],"sources":["C:/coding/react-teamproject-eattogether/src/components/RVInfoItem.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport '../styles/RVInfoItem.css';\r\nimport axios from 'axios';\r\nimport { JSON_SERVER } from '../JsonConfig';\r\n\r\nfunction RVInfoItem({ id, roomname, maxpeople, placeid, date, deleteMyRoom }) {\r\n  const [joinUserId, setJoinUserId] = useState([]);\r\n  const [joinUser, setJoinUser] = useState([]);\r\n  const [place, setPlace] = useState({});\r\n  const localUser = JSON.parse(localStorage.getItem('user'));\r\n\r\n  async function fetchPlaceData() {\r\n    const data = await axios.get(JSON_SERVER + `/place?id=${placeid}`);\r\n    setPlace(data.data[0]);\r\n  }\r\n\r\n  async function fetchJoinerData() {\r\n    const data = await axios.get(JSON_SERVER + `/joiner?roomid=${id}`);\r\n    setJoinUserId(data.data);\r\n  }\r\n  async function fetchJoinerNickname() {\r\n    let str = '';\r\n    joinUserId.forEach((e) => {\r\n      str += `id=${e.userid}&`;\r\n    });\r\n    const data = await axios.get(JSON_SERVER + `/users?${str}`);\r\n    setJoinUser(data.data);\r\n  }\r\n  async function deleteJoinerData(roomId) {\r\n    console.log(roomId + '이랑 ' + localUser.id);\r\n    try {\r\n      const joinerData = await axios.get(\r\n        JSON_SERVER + `/joiner?roomid=${roomId}&userid=${localUser.id}`\r\n      );\r\n      if (joinerData.data.length === 0) {\r\n        console.log('데이터를 찾을 수 없습니다.');\r\n        return;\r\n      }\r\n      const joinerIdToDelete = joinerData.data[0].id;\r\n\r\n      await axios.delete(JSON_SERVER + `/joiner/${joinerIdToDelete}`);\r\n      console.log('데이터가 성공적으로 삭제되었습니다.');\r\n    } catch (error) {\r\n      console.error('데이터 삭제 중 오류가 발생했습니다.', error);\r\n    }\r\n  }\r\n  function deleteRoom() {\r\n    axios.delete(JSON_SERVER + `/room/${id}`);\r\n  }\r\n  useEffect(() => {\r\n    fetchJoinerNickname();\r\n  }, [joinUserId]);\r\n  useEffect(() => {\r\n    fetchPlaceData();\r\n    fetchJoinerData();\r\n  }, []);\r\n  return (\r\n    <div className=\"room-container\">\r\n      <div className=\"room-header\">\r\n        <div>{roomname}</div>\r\n        <div>\r\n          {joinUserId.length} / {maxpeople}\r\n        </div>\r\n      </div>\r\n      <div className=\"room-address\">\r\n        <div>{place.Placename}주소</div>\r\n        <div>{place.Address}주소</div>\r\n      </div>\r\n      <div className=\"room-info\">\r\n        <div className=\"room-joiner\">\r\n          <div className=\"room-joiner-info\">참여자</div>\r\n          {joinUser.map((e, i) => {\r\n            return <div key={i}>{e.nickname}</div>;\r\n          })}\r\n        </div>\r\n        <div className=\"room-time\">\r\n          <div className=\"room-time-info\">시간</div>\r\n          <div>{date}</div>\r\n        </div>\r\n      </div>\r\n      <button\r\n        className=\"room-exit-btn\"\r\n        onClick={() => {\r\n          deleteJoinerData(id);\r\n          deleteMyRoom(id);\r\n          if (joinUserId.length === 1) {\r\n            deleteRoom();\r\n          }\r\n        }}\r\n      >\r\n        방 나가기\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RVInfoItem;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}